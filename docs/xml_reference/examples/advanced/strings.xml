<?xml version="1.0" encoding="UTF-8"?>

<!-- 
    This example shows the functionality of the different string operations 
-->

<pitasc>

    <models>
        <include package="pitasc_library" file="models/pitasc.xml"/>
        <include package="pitasc_library" file="universal_robots/ur.xml"/>
        <include package="pitasc_library" file="models/skills.xml"/>
        <include package="pitasc_library" file="models/parameters.xml"/>
    </models>


    <clone prototype="project">

        <member id="configuration">
            <clone id="configuration" prototype="default_configuration"/>
        </member>

        <member id="environment">
            <clone prototype="robot_ur5">
                <member id="robot_driver.max_velocity">2.0</member>
                <member id="robot_driver.max_acceleration">3.0</member>
            </clone>
        </member>
        
        <!-- Axes that should be used -->
        
        <!-- As string -->
        <type id="axis_x" prototype="string_parameter">
            <data>x</data>
        </type>

        <type id="axis_y" prototype="string_parameter">
            <data>y</data>
        </type>

        <!-- As string list -->
        <type id="axes_xz" prototype="string_list">
            <data>
                <clone prototype="string_parameter">x</clone>
                <clone prototype="string_parameter">z</clone>
            </data>
        </type>
        
        <!-- As string csv -->
        <type id="axes_abc" prototype="string_csv">
            <data>a,b,c</data>
        </type>

        
        <!-- Init string list extension to merge these lists as necessary -->

        <!-- string and string -->
        <type id="axes_1" prototype="string_list_extension">
            <data>
                <reference reference_id="axis_x"/>
                <reference reference_id="axis_y"/>
            </data>
        </type>

        <!-- string_list and string -->
        <type id="axes_2" prototype="string_list_extension">
            <data>
                <reference reference_id="axes_xz"/>
                <reference reference_id="axis_y"/>
            </data>
        </type>
        
        <!-- string_list, string_csv and string -->
        <type id="axes_3" prototype="string_list_extension">
            <data>
                <reference reference_id="axes_xz"/>
                <reference reference_id="axis_y"/>
                <reference reference_id="axes_abc"/>
            </data>
        </type>


        <member id="applications">
            <clone prototype="skill_sequence">
                <member id="robot" reference_id="environment.robot_ur5"/>
                <member id="skills">
                    
                    <clone prototype="skill_lin">
                        <member id="tool_frame">tool</member>
                        <member id="target_frame">target1</member>
                    </clone>

                    
                    <!-- Use string extension to define the axes -->
                    <clone prototype="skill_lin">
                        <member id="tool_frame">tool</member>
                        <member id="target_frame">target2</member>
                        <member id="axes" reference_id="axes_1"/>
                    </clone>

                    <clone prototype="skill_lin">
                        <member id="tool_frame">tool</member>
                        <member id="target_frame">target3</member>
                        <member id="axes" reference_id="axes_2"/>
                    </clone>

                    <clone prototype="skill_lin">
                        <member id="tool_frame">tool</member>
                        <member id="target_frame">target1</member>
                        <member id="axes" reference_id="axes_3"/>
                    </clone>

                </member>

            </clone>

        </member>

    </clone>

</pitasc>