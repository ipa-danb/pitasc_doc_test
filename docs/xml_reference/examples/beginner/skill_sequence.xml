<?xml version="1.0" encoding="UTF-8"?>

<!-- This example application shows the usage of a skill sequence.
ptp -> lin -> idle -> approach
-->

<pitasc>

    <models>
        <include package="pitasc_library" file="models/pitasc.xml"/>
        <include package="pitasc_library" file="models/skills.xml"/>

        <include package="pitasc_library" file="universal_robots/ur.xml"/>
    </models>

    <clone prototype="project">

        <member id="configuration">
            <clone id="configuration" prototype="default_configuration"/>
        </member>

        <member id="environment">
            <clone prototype="robot_ur5">
                <member id="robot_driver.max_velocity">2.0</member>
                <member id="robot_driver.max_acceleration">3.0</member>
            </clone>
        </member>

        <member id="applications">
            <clone prototype="skill_sequence">

                <!-- Use this robot for this skill and all its subskills -->
                <member id="robot" reference_id="environment.robot_ur5"/>

                <!-- Add skills -->
                <member id="skills">

                    <!-- <clone prototype="skill_user_confirm">
                        <member id="title">Go figure this out</member>
                        <member id="text">Do not quit stopping the termination of this skill?</member>
                    </clone> -->

                    <!-- Move ptp -->
                    <clone prototype="skill_ptp">
                        <member id="target_joint_state">0, -1.57, 1.57, 0, -1.57, -1.57</member>
                    </clone>
                    <clone prototype="skill_relative_ptp">
                        <member id="relative_joint_state">0, 0, 0, -0.75, 0, 0</member>
                    </clone>

                    <!-- Move to target1 (lin) -->
                    <clone prototype="skill_lin">
                        <member id="tool_frame">tool</member>
                        <member id="target_frame">target1</member>
                    </clone>
                    <clone prototype="skill_relative_lin">
                        <member id="tool_frame">tool</member>
                        <member id="target_offsets">0, 0, 0.05, 0, 0, 0</member>
                    </clone>

                    <!-- Idle for 1 second -->
                    <clone prototype="skill_idle_duration">
                        <member id="duration">1.0</member>
                    </clone>

                    <!-- Hold pose for 1 second (active control)-->
                    <clone prototype="skill_hold_duration">
                        <member id="tool_frame">tool</member>
                        <member id="duration">1.0</member>
                    </clone>

                    <!-- Approach -->
                    <clone prototype="skill_approach">
                        <member id="tool_frame">tool</member>
                        <member id="target_frame">target1</member>
                        <member id="approach_offsets">0, 0, -0.1, 0, 0, 0</member>
                    </clone>

                    <!-- Partial LIN motion (only x, y)-->
                    <clone prototype="skill_partial_lin">
                        <member id="tool_frame">tool</member>
                        <member id="target_frame">target1</member>
                        <member id="axes">x, y</member>
                        <member id="thresholds">0.001, 0.001</member>
                        <member id="target_offsets">0.05, 0</member>
                    </clone>

                    <!-- Partial velocity motion (only z) -->
                    <clone prototype="skill_partial_velocity_duration">
                        <member id="tool_frame">tool</member>
                        <member id="velocity_frame">target1</member>
                        <member id="axes">z</member>
                        <member id="velocities">0.01</member>
                        <member id="duration">2</member>
                    </clone>

                </member>

            </clone>
        </member>

    </clone>

</pitasc>
