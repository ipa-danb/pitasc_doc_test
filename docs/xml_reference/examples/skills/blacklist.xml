<?xml version="1.0" encoding="UTF-8"?>

<!-- This example application shows how blacklisted parameters work. 
The skill_partial_velocity has an attribute 'referende_id' instead of 'reference_id', causing it to be empty.
The blacklist detects that and fires an error.
-->

<pitasc>

    <models>
        <!-- Include pitasc -->
        <include package="pitasc_library" file="models/pitasc.xml"/>

        <!-- Include the UR5 -->
        <include package="pitasc_library" file="universal_robots/ur.xml"/>

        <!-- Include the skills -->
        <include package="pitasc_library" file="models/skills.xml"/>

    </models>

    <!-- Create a project -->
    <clone prototype="project">

        <member id="configuration">
            <!-- Use the default configuration with recommended settings -->
            <clone id="configuration" prototype="default_configuration"/>
        </member>

        <member id="environment">
            <!-- Add a UR5 -->
            <clone prototype="robot_ur5">
                <member id="robot_driver.max_velocity">2.0</member>
                <member id="robot_driver.max_acceleration">3.0</member>
            </clone>
        </member>

        <member id="applications">

            <!-- Use a skill sequence as a container -->
            <clone prototype="skill_sequence">

                <!-- Use the UR5 for this skill (and for its subskill) -->
                <member id="robot" reference_id="environment.robot_ur5"/>

                <!-- Add subskill(s) -->
                <member id="skills">

                    <!-- Move to target1 (lin) -->
                    <clone prototype="skill_lin">
                        <member id="tool_frame">tool</member>
                        <member id="target_frame">target1</member>
                    </clone>

                    <clone prototype="skill_partial_velocity">
                        <type id="world_frame" prototype="frame">
                            <meta></meta>
                            <data>world</data>
                        </type>
                        <member id="tool_frame">tool</member>
                        <member id="velocity_frame" referende_id="world_frame"/>
                        <member id="axes">z</member>
                        <member id="velocities">0.01</member>
                        <member id="monitors">
                            <clone prototype="monitor_relative_distance">
                                <member id="event">succeeded</member>
                                <member id="reference_frame">world</member>
                                <member id="frame">tool</member>
                                <member id="coordinates">z</member>
                                <member id="distances">0.01</member>
                                <member id="target_offsets"></member>
                                <member id="operator">absolute_greater</member>
                            </clone>
                        </member>
                    </clone>

                </member>

            </clone>

        </member>

    </clone>

</pitasc>
