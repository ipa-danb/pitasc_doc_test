<?xml version="1.0" encoding="UTF-8"?>

<pitasc>

    <models>
        <include package="pitasc_library" file="skills/skill_ptp.xml"/>

        <type id="skill_relative_ptp" prototype="skill_ptp">
            <meta>
                <member id="description">A skill that moves to a relative joint configuration</member>
            </meta>

            <data>

                <type id="relative_joint_state" prototype="float_csv">
                    <meta>
                        <member id="description">Relative joint values of the target pose.</member>
                        <member id="visibility">required</member>
                    </meta>
                </type>

                <!-- Implementation details below: -->

                <!-- Dummy, so Task doesn't complain -->
                <member id="target_joint_state" reference_id="relative_joint_state"/>
                <member id="target_joint_state.meta.visibility">hidden</member>

                <member id="tasks.tracking.setpoint_generators">
                    <clone id="relsetpoint" prototype="relative_setpoint">
                        <member id="data_source">
                            <reference prototype="robot_driver" reference_id="robot.robot_driver"/>
                        </member>
                        <member id="desired" reference_id="target_joint_state"/>
                        <member id="coordinates" reference_id="coordinates"/>
                    </clone>
                </member>
                <member id="tasks.tracking.controllers.p_controller.setpoint_generator">
                    <reference reference_id="setpoint_generators.relsetpoint"/>
                </member>
            </data>
        </type>

    </models>

</pitasc>
