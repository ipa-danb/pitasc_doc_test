<?xml version="1.0" encoding="UTF-8"?>

<pitasc>

    <models>
        <include package="pitasc_library" file="skills/skill_cartesian.xml"/>

        <type id="skill_wait_for_transform" prototype="skill_cartesian">
            <meta>
                <member id="description">A skill that keeps the robot position until a transform becomes available</member>
            </meta>

            <data>

                <type id="frame" prototype="string_parameter">
                    <meta>
                        <member id="description">Transform target to wait for.</member>
                        <member id="visibility">required</member>
                    </meta>
                </type>

                <type id="parent_frame" prototype="string_parameter">
                    <meta>
                        <member id="description">Transform source to wait for.</member>
                        <member id="visibility">basic</member>
                    </meta>
                    <data>world</data>
                </type>

                <!-- Implementation details below: -->

                <member id="tool_frame" reference_id="frame"/>
                <member id="tool_frame.meta.visibility">hidden</member>

                <member id="target_frame" reference_id="parent_frame"/>
                <member id="target_frame.meta.visibility">hidden</member>

                <member id="monitors">
                    <clone prototype="monitor_wait_for_transform">
                        <member id="event">succeeded</member>
                        <member id="frame" reference_id="frame"/>
                        <member id="parent_frame" reference_id="parent_frame"/>
                    </clone>
                </member>

            </data>
        </type>

    </models>

</pitasc>
